/* CRIANDO A DATABASE PARA O TRABALHO*/
CREATE DATABASE atividadeavaliativa;

/* CRIAÇÃO DE TABELAS*/
CREATE TABLE ALUNOS(
	ID_ALUNO INT AUTO_INCREMENT PRIMARY KEY,
    NOME_ALUNO VARCHAR(256),
    ENDERECO VARCHAR(256),
    EMAIL VARCHAR(256)
);

/* Criando procedure */
DELIMITER ?
CREATE PROCEDURE registrar(PA_NOME VARCHAR(256), PA_ENDERECO VARCHAR(256), PA_EMAIL VARCHAR(256))
BEGIN
	IF PA_EMAIL LIKE "%gmail.com%" OR "%hotmail.com%" OR "%@outlook.com&" THEN
		INSERT INTO alunos VALUES(NULL, PA_NOME, PA_ENDERECO, PA_EMAIL);
	ELSE 
		SELECT "INFORME UM E-MAIL VÁLIDO" AS ERRO;
	END IF;
END
?


---------------------------------------------------------------


/* CRIANDO A DATABASE PARA O TRABALHO*/
CREATE DATABASE atividadeavaliativa;

/* CRIAÇÃO DE TABELAS*/
CREATE TABLE ALUNOS(
	ID_ALUNO INT AUTO_INCREMENT PRIMARY KEY,
    NOME_ALUNO VARCHAR(256),
    ENDERECO VARCHAR(256),
    EMAIL VARCHAR(256)
);

/* Criando procedure */
DELIMITER ?
CREATE TRIGGER validar
BEFORE INSERT ON alunos
FOR EACH ROW
BEGIN
    INSERT INTO alunos EMAIL = "%@gmail.com%" OR "%hotmail.com%" OR "%@outlook.com%";
END
? /* criei a trigger pra tentar inserir apenas os emaisl */

CREATE PROCEDURE buscar(PA_EMAIL VARCHAR(256))
BEGIN
	SELECT NOME_ALUNO, ENDERECO, EMAIL FROM alunos
	WHERE PA_EMAIL LIKE EMAIL;
END
? /* a procedure de validação ta funcionando */

DELIMITER ;


CALL buscar("altair@gmail.com");
DROP PROCEDURE buscar;



------------------------------------------
/* CRIANDO A DATABASE PARA O TRABALHO*/
CREATE DATABASE atividadeavaliativa;

/* CRIAÇÃO DE TABELAS*/
CREATE TABLE ALUNOS(
	ID_ALUNO INT AUTO_INCREMENT PRIMARY KEY,
    NOME_ALUNO VARCHAR(256) NOT NULL,
    ENDERECO VARCHAR(256) NOT NULL,
    EMAIL_ALUNO VARCHAR(256)
);

/* Criando procedure */
DELIMITER ?
CREATE TRIGGER validarEmail
BEFORE INSERT ON alunos
FOR EACH ROW
BEGIN
	IF NEW.EMAIL_ALUNO = "[@outlook.com%], [@gmail.com%], [@outlook.com%]" THEN
		INSERT INTO alunos
        VALUES(NULL, NEW.NOME_ALUNO, NEW.ENDERECO, NEW.EMAIL_ALUNO);
	END IF;
END
?

CREATE PROCEDURE buscar(PA_EMAIL VARCHAR(256))
BEGIN
	SELECT NOME_ALUNO, ENDERECO, EMAIL_ALUNO FROM alunos
	WHERE PA_EMAIL LIKE EMAIL_ALUNO;
END
? 

DELIMITER ;

INSERT INTO alunos 
VALUES(NULL, "Dias", "Rua 1 N1", "dias@gmail.com");

CALL buscar("dias@outlook.com");

DROP TRIGGER validarEmail;
DROP PROCEDURE buscar;
DROP TABLE alunos;


